# Design notes

## Information architecture
### Directory tree to sitemap
Each markdown document and each directory is translated to a page with a unique slug.

E.g. a directory structure of `/foo/bar/baz.md` will result in the creation of 3 pages:
1. `/foo/`
2. `/foo/bar/`
3. `/foo/bar/baz`.

### Directory pages
If an `index.md` document is found, its contents will be used as that directory page, otherwise the directory page is autogenerated.

### Navigation
The page is divided first into sections, which are permanently visible. This allows for the separation of different "kinds" of content, and simplifies the sidebar navigation.

TODO: the current section needs to be passed to the page, and we should modify the nav accordingly on the index pages.

The sidebar navigation only shows the content that is nested under the current page (or the current page's parent, if there is no child content). Although this can be extended to show children of children etc, this results in a very long "table of contents" style navigation that doesn't work well when there is a lot of pages.

The navigation is currently missing a link to go "up" a level. Ideally it should show the parent where applicable.

### Internal links
TODO: Markdown links and wikilinks within the markdown documents should get translated to the correct slug.

We could potentially generate related pages by looking at what links back to the current page.

### Orientation

It would be useful to have a full breadcrumb at the top of the page.

### Search

Not implemented yet. Look into using Lunr.js.

## Metadata

The modification time from the filesystem is taken to be the last modified time.

We should display this on the generated pages to give an indication of how stale the content is.

We can also parse metadata from the frontmatter of the documents. This is a chunk of YAML that preceeds the markdown.

## Accessibility
The site is intended to be fully keyboard accessible. There is a skip link to bypass the navigation and go straight to the content.

I deliberately made the fonts big and with lots of spacing. This helps me grok rough notes that I haven't edited well. I want to avoid dense walls of text.

Colours are intended to be high contrast (meeting the WCAG AAA criterion).

This code can't do anything to fix missing alt text - alt text needs to be added in the markdown.

## Layout
I've implemented a responsive layout using flexbox, but I allowed the main content to stretch quite wide, because I want to allow for large images and code blocks.

I don't think this is neccessarily the best way of doing this, but it (sort of) works. It's just a little surprising when the single-column version is used just for one page.

## Ignoring pages

Currently hardcoded. The plan is to generate only documents with particular metadata, so that I don't have to publish everything right away.

## Feeds

Currently we have no way of showing recently added/changed pages.

## CLI

`generator.rb` is currently one command, to generate all files and then start a server. There is no way to do an incremental build because we don't store hashes of the inputs anywhere. This could be improved.
